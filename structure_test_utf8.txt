============================= test session starts =============================
platform win32 -- Python 3.14.0a6, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\chara\AppData\Local\Programs\Python\Python314\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\chara\Downloads\Mirage
plugins: anyio-4.11.0
collecting ... collected 2 items

mirage/tests/test_structure.py::test_required_files_exist PASSED         [ 50%]
mirage/tests/test_structure.py::test_no_hardcoded_secrets FAILED         [100%]

================================== FAILURES ===================================
__________________________ test_no_hardcoded_secrets __________________________

    def test_no_hardcoded_secrets():
        """Simple check to ensure no obvious hardcoded secrets like 'sk-...' are in python files."""
        base_dir = os.path.abspath(os.path.join(os.path.dirname(__file__), "../.."))
    
        for root, _, files in os.walk(base_dir):
            if "venv" in root or ".git" in root or "__pycache__" in root:
                continue
    
            for file in files:
                if file.endswith(".py"):
                    filepath = os.path.join(root, file)
                    with open(filepath, "r", encoding="utf-8") as f:
                        content = f.read()
                        # Very basic check for OpenAI-style keys, can be expanded
>                       assert "sk-proj-" not in content, f"Potential hardcoded secret found in {file}"
E                       AssertionError: Potential hardcoded secret found in test_structure.py
E                       assert 'sk-proj-' not in 'import os\n...in {file}"\n'
E                         
E                         'sk-proj-' is contained here:
E                           import os
E                           import pytest
E                           
E                           REQUIRED_FILES = [
E                               "Dockerfile",...
E                         
E                         ...Full output truncated (29 lines hidden), use '-vv' to show

mirage\tests\test_structure.py:33: AssertionError
=========================== short test summary info ===========================
FAILED mirage/tests/test_structure.py::test_no_hardcoded_secrets - AssertionE...
========================= 1 failed, 1 passed in 0.09s =========================
